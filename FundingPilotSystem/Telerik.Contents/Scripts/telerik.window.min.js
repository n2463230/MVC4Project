(function(n){function i(n){return n&&!/^([a-z]+:)?\/\//i.test(n)}function r(t){n.browser.msie&&n.browser.version<7&&t.find(".t-resize-e,.t-resize-w").css("height",t.height()).end().find(".t-resize-n,.t-resize-s").css("width",t.width()).end().find(".t-overlay").css({width:t.width(),height:t.height()})}var t=n.telerik;t.scripts.push("telerik.window.js"),t.fx.zoom=function(n){this.element=n},t.fx.zoom.prototype={play:function(n,t){var r=this.element.show(),u=r.find("> .t-window-content"),i={width:u.width(),height:u.height(),left:parseInt(r.css("left"))||0,top:parseInt(r.css("top"))||0};r.css({left:i.left+20,top:i.top+20}).animate({left:i.left,top:i.top},n.openDuration),u.css({width:i.width-40,height:i.height-40}).animate({width:i.width,height:i.height},n.openDuration,function(){t&&t()})},rewind:function(n,t){var r=this.element,u=r.find("> .t-window-content"),i={width:u.width(),height:u.height(),left:parseInt(r.css("left")),top:parseInt(r.css("top"))};u.animate({width:i.width-40,height:i.height-40},n.closeDuration),r.animate({left:i.left+20,top:i.top+20},n.closeDuration,function(){r.css({left:i.left,top:i.top}).hide(),setTimeout(function(){u.css({width:i.width,height:i.height})},0),t&&t()})}},t.fx.zoom.defaults=function(){return{list:[{name:"zoom"}],openDuration:"fast",closeDuration:"fast"}},t.window=function(u,f){var e,s,o,h;this.element=u,e=n(u),s=n.extend({},f),delete s.title,delete s.content,n.extend(this,s),e.is(".t-window")||(e.addClass("t-widget t-window"),t.window.create(u,f)),e.is("body")||(e.is(":visible")?(o=e.offset(),e.css({top:o.top,left:o.left})):(e.css({visibility:"hidden",display:""}),o=e.offset(),e.css({top:o.top,left:o.left}).css({visibility:"visible",display:"none"})),e.toggleClass("t-rtl",e.closest(".t-rtl").length>0).appendTo(document.body)),this.bringToTop(),e.bind("mousedown",n.proxy(this.bringToTop,this)),this.modal&&e.is(":visible")&&this.overlay(!0).css({opacity:.5,zIndex:parseInt(e.css("zIndex"),10)-1}),h=".t-window-titlebar .t-link",e.delegate(h,"mouseenter",t.hover).delegate(h,"mouseleave",t.leave).delegate(h,"click",n.proxy(this.windowActionHandler,this)),this.resizable&&(e.delegate(".t-window-titlebar","dblclick",n.proxy(this.toggleMaximization,this)).append(t.window.getResizeHandlesHtml()),r(e),function(i){function u(t){var r=n(i.element);i.initialCursorPosition=r.offset(),i.resizeDirection=/t-resize-([nesw]+)/gi.exec(t.$draggable[0].className)[1],i.resizeElement=r.find("> .t-window-content"),i.initialSize={width:i.resizeElement.width(),height:i.resizeElement.height()},i.outlineSize={left:i.resizeElement.outerWidth()-i.resizeElement.width()+r.outerWidth()-r.width(),top:i.resizeElement.outerHeight()-i.resizeElement.height()+r.outerHeight()-r.height()+r.find("> .t-window-titlebar").outerHeight()},n('<div class="t-overlay" />').appendTo(i.element),r.find(".t-resize-handle").not(t.$draggable).hide(),n(document.body).css("cursor",t.$draggable.css("cursor"))}function f(u){var f=n(i.element),e={e:function(){var r=t.touchLocation(u),n=r.x-i.initialCursorPosition.left-i.outlineSize.left;i.resizeElement.width(n<i.minWidth?i.minWidth:i.maxWidth&&n>i.maxWidth?i.maxWidth:n)},s:function(){var r=t.touchLocation(u),n=r.y-i.initialCursorPosition.top-i.outlineSize.top;i.resizeElement.height(n<i.minHeight?i.minHeight:i.maxHeight&&n>i.maxHeight?i.maxHeight:n)},w:function(){var r=t.touchLocation(u),n=i.initialCursorPosition.left+i.initialSize.width,e;f.css("left",r.x>n-i.minWidth?n-i.minWidth:r.x<n-i.maxWidth?n-i.maxWidth:r.x),e=n-r.x,i.resizeElement.width(e<i.minWidth?i.minWidth:i.maxWidth&&e>i.maxWidth?i.maxWidth:e)},n:function(){var r=t.touchLocation(u),n=i.initialCursorPosition.top+i.initialSize.height,e;f.css("top",r.y>n-i.minHeight?n-i.minHeight:r.y<n-i.maxHeight?n-i.maxHeight:r.y),e=n-r.y,i.resizeElement.height(e<i.minHeight?i.minHeight:i.maxHeight&&e>i.maxHeight?i.maxHeight:e)}};n.each(i.resizeDirection.split(""),function(){e[this]()}),r(f),n.browser.msie&&parseInt(n.browser.version)>=9&&(f[0].style.cssText=f[0].style.cssText),t.trigger(i.element,"resize")}function e(t){var u=n(i.element);return u.find(".t-overlay").remove().end().find(".t-resize-handle").not(t.$draggable).show(),n(document.body).css("cursor",""),t.keyCode==27&&(r(u),u.css(i.initialCursorPosition),i.resizeElement.css(i.initialSize)),!1}new t.draggable({owner:i.element,selector:".t-resize-handle",scope:i.element.id+"-resizing",distance:0,start:u,drag:f,stop:e})}(this)),this.draggable&&function(i){function r(r){var u=n(i.element),e=t.touchLocation(r),f;i.initialWindowPosition=u.position(),i.startPosition={left:e.x-i.initialWindowPosition.left,top:e.y-i.initialWindowPosition.top},f=u.find(".t-window-actions"),i.minLeftPosition=f.length>0?f.outerWidth()+parseInt(f.css("right"),10)-u.outerWidth():20-u.outerWidth(),n(".t-resize-handle",i.element).hide(),n('<div class="t-overlay" />').appendTo(i.element),n(document.body).css("cursor",r.$draggable.css("cursor"))}function u(r){var u=t.touchLocation(r),f={left:Math.max(u.x-i.startPosition.left,i.minLeftPosition),top:Math.max(u.y-i.startPosition.top,0)};n(i.element).css(f)}function f(t){return n(i.element).find(".t-resize-handle").show().end().find(".t-overlay").remove(),n(document.body).css("cursor",""),t.keyCode==27&&t.$draggable.closest(".t-window").css(i.initialWindowPosition),!1}new t.draggable({owner:i.element,selector:".t-window-titlebar",scope:i.element.id+"-moving",start:r,drag:u,stop:f})}(this),t.bind(this,{open:this.onOpen,activated:this.onActivate,close:this.onClose,refresh:this.onRefresh,resize:this.onResize,error:this.onError,load:this.onLoad,move:this.onMove}),n(window).resize(n.proxy(this.onDocumentResize,this)),i(this.contentUrl)&&this.ajaxRequest()},t.window.prototype={overlay:function(t){var i=n("body > .t-overlay"),r=this.element;return i.length==0?i=n('<div class="t-overlay" />').toggle(t).insertBefore(r):i.insertBefore(r).toggle(t),this.positionOverlay(i),i},positionOverlay:function(t){var i=n(document);n.browser.msie&&n.browser.version<7?t.css({width:i.width()-21,height:i.height(),position:"absolute"}):/ipad/gi.test(navigator.appVersion)&&t.css({width:i.width(),height:i.height(),position:"absolute"})},overlayOnClose:function(t){var i=this,f=n(".t-window").filter(function(){var t=n(this);return this!==i.element&&t.is(":visible")&&t.data("tWindow").modal}),s=i.modal&&f.length==0,r=i.modal?i.overlay(!0):n(undefined),h,u,e,o;s?i.effects.list.length>0&&i.effects.list[0].name!="toggle"?r.fadeOut(i.effects.closeDuration,function(){t&&r.remove()}):t?r.remove():r.hide():f.length>0&&(h=parseInt(n(".t-overlay").css("zIndex"),10),u=0,f.each(function(t,i){var r=parseInt(n(i).css("zIndex"),10);r>=u&&(u=r,e=n(i))}),o=e.data("tWindow"),o.overlay(!0).css("zIndex",u-1))},windowActionHandler:function(t){var i=n(t.target).closest(".t-link").find(".t-icon"),r=this;n.each({"t-close":this.close,"t-maximize":this.maximize,"t-restore":this.restore,"t-refresh":this.refresh},function(n,u){if(i.hasClass(n))return t.preventDefault(),u.call(r),!1})},center:function(){var i=n(this.element),t=n(window),u=n(document.body),o=t.scrollLeft(),f=u.scrollLeft(),e=t.scrollTop(),r=u.scrollTop();return jQuery.browser.webkit&&e==r&&(r=0,f=0),i.css({left:o+f+Math.max(0,(t.width()-i.width())/2),top:e+r+Math.max(0,(t.height()-i.height())/2)}),this},title:function(t){var i=n(".t-window-titlebar > .t-window-title",this.element);return t?(i.text(t),this):i.text()},content:function(t){var i=n("> .t-window-content",this.element);return t?(i.html(t),this):i.html()},bringToTop:function(){var t=0,i=this;return n(".t-window").each(function(){var r=n(this),u=r.css("zIndex");isNaN(u)||(t=Math.max(parseInt(u,10),t)),this!=i.element&&r.find(".t-window-content > iframe").length>0&&r.find(".t-window-content").append("<div class='t-overlay' />")}),n(i.element).css("zIndex",t+2).find(".t-window-content > .t-overlay").remove(),i},open:function(){var i=n(this.element),r;return this.bringToTop(),t.trigger(this.element,"open")||(this.modal&&(r=this.overlay(!1).css("zIndex",parseInt(i.css("zIndex"),10)-1),this.effects.list.length>0&&this.effects.list[0].name!="toggle"?r.css("opacity",0).show().animate({opacity:.5},this.effects.openDuration):r.css("opacity",.5).show()),i.is(":visible")||t.fx.play(this.effects,i,{},function(){t.trigger(i[0],"activated")})),this.isMaximized&&n("html, body").css("overflow","hidden"),this},close:function(){var i=n(this.element);return i.is(":visible")&&(t.trigger(this.element,"close")||(this.overlayOnClose(),t.fx.rewind(this.effects,i,null,function(){i.hide()}))),this.isMaximized&&n("html, body").css("overflow",""),this},toggleMaximization:function(t){t&&n(t.target).closest(".t-link").length>0||this[this.isMaximized?"restore":"maximize"]()},restore:function(){if(this.isMaximized)return n(this.element).css({position:"absolute",left:this.restorationSettings.left,top:this.restorationSettings.top}).find("> .t-window-content").css({width:this.restorationSettings.width,height:this.restorationSettings.height}).end().find(".t-resize-handle").show().end().find(".t-window-titlebar .t-restore").addClass("t-maximize").removeClass("t-restore"),n("html, body").css("overflow",""),this.isMaximized=!1,t.trigger(this.element,"resize"),this},maximize:function(){if(!this.isMaximized){var t=n(this.element),i=t.find("> .t-window-content");return this.restorationSettings={left:t.position().left,top:t.position().top,width:i.width(),height:i.height()},t.css({left:0,top:0,position:"fixed"}).find(".t-resize-handle").hide().end().find(".t-window-titlebar .t-maximize").addClass("t-restore").removeClass("t-maximize"),n("html, body").css("overflow","hidden"),this.isMaximized=!0,this.onDocumentResize(),this}},onDocumentResize:function(){if(this.isMaximized){var i=n(this.element),u=i.find("> .t-window-content");u.css({width:n(window).width()-(u.outerWidth()-u.width()+i.outerWidth()-i.width()),height:n(window).height()-(u.outerHeight()-u.height()+i.outerHeight()-i.height()+i.find("> .t-window-titlebar").outerHeight())}),r(i),t.trigger(i,"resize")}},refresh:function(){if(i(this.contentUrl))this.ajaxRequest();else{var t=n(this.element).find("> .t-window-content > iframe")[0];t&&(t.src=t.src)}return this},ajaxRequest:function(i,r){var u=setTimeout(function(){n(".t-refresh",this.element).addClass("t-loading")},100);n.ajax({type:"GET",url:i||this.contentUrl,dataType:"html",data:r||{},cache:!1,error:n.proxy(function(n,i){t.ajaxError(this.element,"error",n,i)},this),complete:function(){clearTimeout(u),n(".t-refresh",this.element).removeClass("t-loading")},success:n.proxy(function(i){n(".t-window-content",this.element).html(i),t.trigger(this.element,"refresh")},this)})},destroy:function(){n(this.element).remove(),this.overlayOnClose(!0)}},n.extend(t.window,{create:function(){var e,r,f,u;if(n.isPlainObject(arguments[0])?r=arguments[0]:(e=arguments[0],r=n.extend({html:e.innerHTML},arguments[1])),r=n.extend({title:"",html:"",actions:["Close"]},r),f=r.contentUrl,u=(new t.stringBuilder).catIf('<div class="t-widget t-window">',!e).cat('<div class="t-window-titlebar t-header">').cat('&nbsp;<span class="t-window-title">').cat(r.title).cat("<\/span>").cat('<div class="t-window-actions t-header">'),n.map(r.actions,function(n){u.cat('<a href="#" class="t-link">').cat('<span class="t-icon t-').cat(n.toLowerCase()).cat('">').cat(n).cat("<\/span><\/a>")}),u.cat("<\/div><\/div>").cat('<div class="t-window-content t-content" style="'),r.width&&u.cat("width:").cat(r.width).cat("px;"),r.height&&u.cat("height:").cat(r.height).cat("px;"),typeof r.scrollable!="undefined"&&r.scrollable===!1&&u.cat("overflow:hidden;"),u.cat('">').catIf(r.html,!f||f&&i(f)).catIf('<iframe src="',f,'" title="',r.title,'" frameborder="0" style="border:0;width:100%;height:100%;">This page requires frames in order to show content<\/iframe>',f&&!i(f)).cat("<\/div>").catIf("<\/div>",!e),e)n(e).html(u.string());else return delete r.title,n(u.string()).appendTo(document.body).eq(0).tWindow(r)},getResizeHandlesHtml:function(){var i=new t.stringBuilder;return n.each("n e s w se sw ne nw".split(" "),function(n,t){i.cat('<div class="t-resize-handle t-resize-').cat(t).catIf(" t-icon",t=="se").cat('"><\/div>')}),i.string()}}),n.fn.tWindow=function(i){return t.create(this,{name:"tWindow",init:function(n,i){return new t.window(n,i)},success:function(i){var r=i.element,u=n(r);u.is(":visible")&&(t.trigger(r,"open"),t.trigger(r,"activated"))},options:i})},n.fn.tWindow.defaults={effects:{list:[{name:"zoom"},{name:"property",properties:["opacity"]}],openDuration:"fast",closeDuration:"fast"},modal:!1,resizable:!0,draggable:!0,minWidth:50,minHeight:50}})(jQuery);