(function(n){var t=n.telerik;t.scripts.push("telerik.timepicker.js"),t.timeView=function(i){n.extend(this,i);var r=this.dropDown=new t.dropDown({attr:this.dropDownAttr,effects:this.effects,onClick:function(n){var t=n.item;i.onChange(t.innerText||t.textContent)}});r.$element.addClass("t-time-popup").css("direction",this.isRtl?"rtl":"")},t.timeView.prototype={_ensureItems:function(){this.dropDown.$items||this.bind()},open:function(n){this._ensureItems(),this.dropDown.open(n)},close:function(){this.dropDown.close()},bind:function(){var f=t.timeView.getTimeMilliseconds,e=[],c=this.format,l=this.interval,i=new t.datetime(this.minValue),r=f(i),n=f(this.maxValue),o=l*t.datetime.msPerMinute,s=parseInt(t.datetime.msPerDay/(l*t.datetime.msPerMinute)),a,v,h,u;for(r!=n&&(a=r<n?n-r:n+t.datetime.msPerDay-r,s=parseInt(a/o)+1),v=t.datetime.add,h=t.datetime.format,u=0;u<s;u++)e[u]=h(i.toDate(),c),i=v(i,o);f(i)-o-n!=0&&r!=n&&(e[s]=h(this.maxValue,c)),this.dropDown.dataBind(e)},isOpened:function(){return this.dropDown.isOpened()},value:function(t){var i,r;if(this._ensureItems(),i=this.dropDown,t===undefined)return i.$items.filter(".t-state-selected").text();(r=i.$items,r)&&(r.removeClass("t-state-selected"),t&&i.highlight(n.grep(r,function(n){return(n.innerText||n.textContent)==t})))},navigate:function(n){var t=n.keyCode||n.which,e;(t==38||t==40)&&n.preventDefault(),this._ensureItems();var i=this.dropDown,u=i.$items,f=u.filter(".t-state-selected"),r=f.length==0||u.length==1?u.first():t==38?f.prev():t==40?f.next():[];if(r.length)if(e=r.text(),i.scrollTo(r[0]),i.highlight(r[0]),i.isOpened())this.onNavigateWithOpenPopup(e);else this.onChange(e)}},n.each(["min","max"],n.proxy(function(n,i){t.timeView.prototype[i]=function(n){var t=i+"Value";if(n===undefined)return this[t];this[t]=new Date(n.value?n.value:n),this.bind()}},this)),n.extend(t.timeView,{isInRange:function(n,i,r){if(n===null)return!0;var o=t.timeView.getTimeMilliseconds,s=t.datetime.msPerDay,u=o(n),e=o(i),f=o(r);return u=e>u?u+s:u,f=e>f?f+s:f,e-f==0||u>=e&&u<=f},getTimeMilliseconds:function(n){return n=n.value?n:new t.datetime(n),(n.hours()*60+n.minutes())*t.datetime.msPerMinute+n.seconds()*1e3+n.milliseconds()}}),t.timepicker=function(i,r){var u,o,f,e,s;if(n.extend(this,r),i.nodeName.toLowerCase()!=="input"&&i.type.toLowerCase()!=="text")throw"Target element is not a INPUT";this.element=i,u=this.$element=n(i).addClass("t-input").attr("autocomplete","off").bind({keydown:n.proxy(this._keydown,this),focus:n.proxy(function(){this.openOnFocus&&this._open(),this.$element.removeClass("t-state-error")},this),blur:n.proxy(function(){this._bluring=setTimeout(n.proxy(function(){this._update(u.val())},this),100)},this)}),u.parent().hasClass("t-picker-wrap")||(u.wrap('<div class="t-widget t-timepicker"><div class="t-picker-wrap"><\/div><\/div>'),r.showButton&&(o=new t.stringBuilder,f=r.buttonTitle,n(o.cat('<span class="t-select">').cat('<span class="t-icon t-icon-clock" ').catIf('title="',f).catIf(f,f).cat('"><\/span><\/span>').string()).insertAfter(u))),this.timeView=new t.timeView({effects:this.effects,dropDownAttr:this.dropDownAttr,format:this.format,interval:this.interval,isRtl:u.closest(".t-rtl").length,minValue:this.minValue,maxValue:this.maxValue,onNavigateWithOpenPopup:n.proxy(function(n){this.$element.val(n)},this),onChange:n.proxy(function(n){clearTimeout(this._bluring),n!=this.inputValue&&this._update(n),this._close(),window.setTimeout(function(){u.focus()},1)},this)}),this.inputValue=u.val(),e=this.selectedValue||this.inputValue,e&&this._value(this.parse(e)),s=this.enabled?n.proxy(this._togglePopup,this):t.preventDefault,this.$wrapper=u.closest(".t-timepicker").find(".t-icon").bind("click",s).end(),n(document.documentElement).bind("mousedown",n.proxy(function(t){var r=this.$element.val(),i,u;(r!=this.inputValue&&this._update(r),i=this.timeView.dropDown.$element,u=i&&i.parent().length>0,!u||n.contains(this.$wrapper[0],t.target)||n.contains(i.parent()[0],t.target))||this._close()},this)),t.bind(this,{open:this.onOpen,close:this.onClose,valueChange:this.onChange,load:this.onLoad})},t.timepicker.prototype={_close:function(){var n=this.timeView.dropDown;!n.$element.is(":animated")&&n.isOpened()&&this._trigger("close")},_open:function(){this.timeView.isOpened()||this._trigger("open")},_trigger:function(n){t.trigger(this.element,n)||this[n]()},_togglePopup:function(){this.timeView.isOpened()?this._close():(this.element.focus(),this._open())},_update:function(n){var r=this.minValue,u=this.maxValue,n=this.parse(n),i=this.selectedValue,o,s;if(n!=null&&!t.timeView.isInRange(n,r,u)){var f=t.timeView.getTimeMilliseconds,e=f(n),h=Math.abs(f(r)-e),c=Math.abs(f(u)-e);n=new Date(h<c?r:u)}o=i?t.datetime.format(i,this.format):"",s=n?t.datetime.format(n,this.format):"",this._value(n),s!=o&&t.trigger(this.element,"valueChange",{previousValue:i,value:n})&&this._value(i)},_value:function(n){var i=this.$element.val(),r=n===null;this.selectedValue=n,this.timeView.value(r?null:t.datetime.format(n,this.format)),r||(i=t.datetime.format(n,this.format)),this.inputValue=i,this.$element.toggleClass("t-state-error",r&&i!="").val(i)},_keydown:function(n){var t=n.keyCode||n.which;if(n.altKey){t==40?this._open():t==38&&this._close();return}if(!n.shiftKey&&(t===38||t===40)){this.timeView.navigate(n);return}(t==9||t==13||t==27)&&(this._update(this.$element.val()),this._close())},enable:function(){this.$element.attr("disabled",!1),this.$wrapper.removeClass("t-state-disabled").find(".t-icon").unbind("click").bind("click",n.proxy(this._togglePopup,this))},disable:function(){this.$element.attr("disabled",!0),this.$wrapper.addClass("t-state-disabled").find(".t-icon").unbind("click").bind("click",t.preventDefault)},value:function(n){if(n===undefined)return this.selectedValue;var i=this.parse(n);return i=t.timeView.isInRange(i,this.minValue,this.maxValue)?i:null,i===null&&this.$element.removeClass("t-state-error").val(""),this._value(i),this},parse:function(n){if(n===null||n.getDate)return n;var i=t.datetime.parse({AM:t.cultureInfo.am,PM:t.cultureInfo.pm,value:n,format:this.format,baseDate:this.selectedValue?new t.datetime(this.selectedValue):new t.datetime});return i!=null?i.toDate():null},open:function(){var n=this.$element;this.timeView.open({offset:n.offset(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth(),zIndex:t.getElementZIndex(n[0])})},close:function(){this.timeView.close()}},n.each(["min","max"],n.proxy(function(n,i){t.timepicker.prototype[i]=function(n){var r=i+"Value",t;if(n===undefined)return this[r];t=this.parse(n),t!==null&&(this[r]=t,this.timeView[i](t))}},this)),n.fn.tTimePicker=function(n){return t.create(this,{name:"tTimePicker",init:function(n,i){return new t.timepicker(n,i)},options:n})},n.fn.tTimePicker.defaults={effects:t.fx.slide.defaults(),minValue:(new t.datetime).hours(0).minutes(0).seconds(0).toDate(),maxValue:(new t.datetime).hours(0).minutes(0).seconds(0).toDate(),selectedValue:null,format:t.cultureInfo.shortTime,interval:30,showButton:!0,buttonTitle:"Open the calendar",enabled:!0,openOnFocus:!1}})(jQuery);