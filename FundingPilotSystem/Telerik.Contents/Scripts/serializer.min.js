function domToXhtml(n){function r(n){var f=[],y=n.attributes,l=$.trim,r,o,i,e,a,c,d,v;if(dom.is(n,"img")){var p=n.style.width,w=n.style.height,b=$(n);p&&(b.attr("width",parseInt(p)),dom.unstyle(n,{width:undefined})),w&&(b.attr("height",parseInt(w)),dom.unstyle(n,{height:undefined}))}for(i=0,e=y.length;i<e;i++)r=y[i],o=r.nodeName,(r.specified||o=="value"&&n.value!=""||o=="type"&&r.nodeValue=="text")&&o.indexOf("_moz")<0&&o!="complete"&&f.push(r);if(f.length)for(f.sort(function(n,t){return n.nodeName>t.nodeName?1:n.nodeName<t.nodeName?-1:0}),i=0,e=f.length;i<e;i++){var r=f[i],u=r.nodeName,k=r.nodeValue;if(t.push(" "),t.push(u),t.push('="'),u=="style"){for(a=l(k||n.style.cssText).split(";"),c=0,d=a.length;c<d;c++)if(v=a[c],v.length){var g=v.split(":"),s=l(g[0].toLowerCase()),h=l(g[1]);if(s=="font-size-adjust"||s=="font-stretch")continue;s.indexOf("color")>=0&&(h=dom.toHex(h)),s.indexOf("font")>=0&&(h=h.replace(quoteRe,"'")),t.push(s),t.push(":"),t.push(h),t.push(";")}}else u=="src"||u=="href"?t.push(n.getAttribute(u,2)):t.push(fillAttrs[u]?u:k);t.push('"')}}function i(n,t){for(var i=n.firstChild;i;i=i.nextSibling)f(i,t)}function f(n,f){var h=n.nodeType,s,c,e,l,o;if(h==1){if(n.attributes._moz_dirty&&dom.is(n,"br"))return;if(s=dom.name(n),c=u[s],c){c.start(n),i(n),c.end(n);return}t.push("<"),t.push(s),r(n),empty[s]?t.push(" />"):(t.push(">"),i(n,f||dom.is(n,"pre")),t.push("<\/"),t.push(s),t.push(">"))}else h==3?(e=n.nodeValue,!f&&$.support.leadingWhitespace&&(l=n.parentNode,o=n.previousSibling,o||(o=(dom.isInline(l)?l:n).previousSibling),(!o||o.innerHTML==""||dom.isBlock(o))&&(e=e.replace(/^[\r\n\v\f\t ]+/,"")),e=e.replace(/ +/," ")),t.push(dom.encode(e))):h==4?(t.push("<![CDATA["),t.push(n.data),t.push("]\]>")):h==8&&(n.data.indexOf("[CDATA[")<0?(t.push("<!--"),t.push(n.data),t.push("-->")):(t.push("<!"),t.push(n.data),t.push(">")))}var t=[],u={"telerik:script":{start:function(n){t.push("<script"),r(n),t.push(">")},end:function(){t.push("<\/script>")}},b:{start:function(){t.push("<strong>")},end:function(){t.push("<\/strong>")}},i:{start:function(){t.push("<em>")},end:function(){t.push("<\/em>")}},u:{start:function(){t.push('<span style="text-decoration:underline;">')},end:function(){t.push("<\/span>")}},font:{start:function(n){t.push('<span style="');var i=n.getAttribute("color"),r=fontSizeMappings[n.getAttribute("size")],u=n.getAttribute("face");i&&(t.push("color:"),t.push(dom.toHex(i)),t.push(";")),u&&(t.push("font-face:"),t.push(u),t.push(";")),r&&(t.push("font-size:"),t.push(r),t.push(";")),t.push('">')},end:function(){t.push("<\/span>")}}};return(i(n),t=t.join(""),t.replace(brRe,"").replace(emptyPRe,"")=="")?"":t}var fontSizeMappings="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),quoteRe=/"/g,brRe=/<br[^>]*>/i,emptyPRe=/<p><\/p>/i;