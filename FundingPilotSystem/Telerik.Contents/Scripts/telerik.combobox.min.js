(function(n){function i(n,t){var i,u,r,f;if(t&&(t=t.toLowerCase(),n))for(i=0,u=n.length;i<u;i++)if(r=n[i],f=r.Text,f.toLowerCase()==t)return r}var t=n.telerik;t.scripts.push("telerik.combobox.js"),t.combobox=function(r,u){function y(){var t=this.dropDown,n=this.trigger;this.loader.ajaxError=!1,t.isOpened()?n.close():(t.$items?n.open():this.fill(n.open),e[0].focus())}function l(n){clearTimeout(n.timeout),n.filtering.filter(n),n.timeout=setTimeout(function(){n.filtering.filter(n)},n.delay)}function p(r){var f=this.trigger,e=this.dropDown,u=r.keyCode||r.which,h,s,c,a,o;if(this.lastKeyCode=u,r.altKey&&(u==38||u==40)){h=u==38?f.close:f.open,e.$items?h():this.fill(h);return}if(!r.shiftKey&&(u==38||u==40)){if(r.preventDefault(),s=n.proxy(function(){var n=e.$items,t=n.filter(".t-state-selected:first"),r=t.length==0||n.length==1||this.selectedIndex==-1?n.first():u==38?t.prev():u==40?t.next():[],i;r.length&&(i=r[0],this.select(i),e.scrollTo(i),e.isOpened()||f.change())},this),!e.$items){(this.index!=-1||this.value()||this.selectedValue)&&(s=null),this.fill(s);return}s()}(u==8||u==46||r.ctrlKey&&u==88)&&(c=this.$text,c.val()!=""&&l(this),setTimeout(n.proxy(function(){c.val()==""?(this.selectedIndex=-1,this.$element.val("")):this.$element.val(this.$text.val())},this),0)),u==13&&e.isOpened()&&(r.preventDefault(),a=e.$items.filter(".t-state-selected:first"),a.length>0?this.select(a[0]):this.$element.val(this.$text.val()),f.change(),f.close(),t.list.moveToEnd(this.$text[0])),(u==27||u==9)&&(clearTimeout(this.timeout),o=i(this.data,this.$text.val()),o&&(this.text(o.Text),this.$element.val(o.Value||o.Text)),f.change(),f.close(),u==27&&this.$text.blur())}function w(i){this._textChanged=!0;var r=i.keyCode||i.charCode;if(!i.shiftKey&&(r==0||n.inArray(r,t.list.keycodes)!=-1||i.ctrlKey))return!0;setTimeout(n.proxy(function(){this.$element.val(this.$text.val())},this),0),l(this)}var a,o,s,f;n.extend(this,u),a=r.nodeName.toLowerCase()=="input"&&r.type.toLowerCase()=="text",o=r.nodeName.toLowerCase()=="select",(a||o)&&!n(r).parent().hasClass("t-combobox")&&(o&&!this.data&&(this.data=t.list.retrieveData(r)),s=new t.list.htmlBuilder(r,"t-combobox",o),s.text=function(t){var i=t.builder;return i.buffer=[],n(i.cat('<input class="t-input" autocomplete="off" type="text" ').catIf('value="',t.text,'" ',t.text).catIf('name="',t.name,'-input" ',t.name).cat("/>").string())},s.render(),o&&(r=r.previousSibling)),this.element=r,f=this.$element=n(r),this.loader=new t.list.loader(this),this.trigger=new t.list.trigger(this);var h=this.$wrapper=f.closest(".t-combobox"),c=this.$wrapper.find(".t-select"),e=this.$text=this.$wrapper.find("> .t-dropdown-wrap > .t-input").attr("autocomplete","off").bind("paste",n.proxy(function(t){setTimeout(n.proxy(function(){this.$element.val(t.target.value),l(this)},this),0)},this)),v=function(n){var t="class",i=f.attr(t);(n.attrName&&n.attrName=="class"||n.propertyName&&n.propertyName=="className")&&i!=e.attr(t)&&e.attr(t,i).addClass("t-input")};n.browser.msie?r.attachEvent("onpropertychange",v):f.bind("DOMAttrModified",v),f.closest("form").bind("reset",n.proxy(function(){var n=this;window.setTimeout(function(){f.val()!=""?n.value(f.val()):(n.highlight(0),n.selectedIndex=0)},1)},this)),this.filtering=new t.list.filtering(this),this.filtering.autoFill=function(n,i){var e;if(n.autoFill&&n.lastKeyCode!=8&&n.lastKeyCode!=46){var r=n.$text[0],u=t.caretPos(r),f=r.value.substring(0,u),o=i.toLowerCase().indexOf(f.toLowerCase());o!=-1&&(e=i.substring(o+f.length),r.value=f+e,t.list.selection(r,u,u+e.length))}},this.dropDown=new t.dropDown({attr:this.dropDownAttr,effects:this.effects,onOpen:n.proxy(function(){var r=this.data,t=this.dropDown,i,n;r.length!=0&&(i=this.$text.val(),n=this.selectedIndex,n!=-1&&this.isFiltered&&(i==r[n].Text?(this.filteredDataIndexes=[],t.onItemCreate=null,this.filter&&t.dataBind(this.data,this.encoded),this.select(t.$items[n])):this.filters[this.filter](this,this.data,i),this.isFiltered=!1))},this),onClick:n.proxy(function(n){this.select(n.item),this.trigger.change(),this.trigger.close(),e.focus()},this)}),this.dropDown.$element.css("direction",h.closest(".t-rtl").length?"rtl":""),this.enable=function(){h.removeClass("t-state-disabled"),e.removeAttr("disabled"),f.removeAttr("disabled"),c.data("events")||c.bind("click",n.proxy(y,this))},this.disable=function(){h.addClass("t-state-disabled"),e.attr("disabled","disabled"),f.attr("disabled","disabled"),c.unbind("click")},this[this.enabled?"enable":"disable"](),this.fill=function(n){function u(n){var r=n.selectedValue||n.value();if(r){n.value(r);return}var t=f.$items,i=n.index,u=t.filter(".t-state-selected"),e=u.length,o=i!=-1&&i<t.length?t[i]:e>0?u[e-1]:null;o?n.select(o):(n.selectedIndex=-1,n.highlightFirst&&n.highlight(t[0]))}var i=this.loader,f=this.dropDown,o=this.minChars,e=this.text(),s=e.length,r;f.$items||i.ajaxError||((i.isAjax()||this.onDataBinding)&&s>=o?(r={},r[this.queryString.text]=e,i.ajaxRequest(function(i){this.dataBind(i,!0),u(this),t.trigger(this.element,"dataBound"),this.trigger.change(),n&&n()},{data:r})):(this.dataBind(this.data,!0),u(this),n&&n()))},this.reload=function(){this.dropDown.$items=null,this.fill()},this.select=function(n){var i=this.highlight(n),r,u,f;return i!=-1&&(r=this.filteredDataIndexes,this.selectedIndex=(r&&r.length)>0?r[i]:i,u=this.data[this.selectedIndex],f=GetTextFromHtml(u.Text),t.list.updateTextAndValue(this,f,u.Value)),i},this.text=function(){return this.$text.val.apply(this.$text,arguments)},this.value=function(){if(arguments.length){var n=arguments[0],t=this.select(function(t){return n==(t.Value||t.Text)});t==-1&&(this.selectedIndex=t,this.$element.val(n),this.text(n)),this.previousValue=this.$element.val()}else return this.$element.val()},t.list.common.call(this),t.list.filters.call(this),t.list.initialize.call(this),n(document.documentElement).bind("mousedown",n.proxy(function(t){var u=this.dropDown.$element,f=u&&u.parent().length>0,r;n.contains(this.$wrapper[0],t.target)||f&&n.contains(u.parent()[0],t.target)||(this._textChanged&&(this._textChanged=!1,r=i(this.data,this.$text.val()),r&&(this.text(r.Text),this.$element.val(r.Value||r.Text))),this.trigger.change(),this.trigger.close())},this)),this.$text.bind({keydown:n.proxy(p,this),keypress:n.proxy(w,this),focus:n.proxy(function(){var n,r,i;this.openOnFocus&&(n=this.trigger,r=this.dropDown,r.$items?n.open():this.fill(n.open)),i=this.$text,window.setTimeout(function(){t.list.selection(i[0],0,i.val().length)},130)},this)})},n.fn.tComboBox=function(n){return t.create(this,{name:"tComboBox",init:function(n,i){return new t.combobox(n,i)},options:n})},n.fn.tComboBox.defaults={encoded:!0,openOnFocus:!1,effects:t.fx.slide.defaults(),index:-1,autoFill:!0,highlightFirst:!0,filter:0,delay:200,minChars:0,enabled:!0,cache:!0,queryString:{text:"text"}}})(jQuery);