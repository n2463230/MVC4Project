(function(n){function e(n){for(var f={},u,i,t=0,e=r.length;t<e;t++)u=r[t],i=n.css(u),i&&r[t]!="font-style"&&i!="normal"&&(f[u]=i);return f}function u(n){var t=-1,i=-1,r,u,f,e;return document.selection?(r=n.document.selection.createRange().text,u=r.length,u>0&&(t=n.value.indexOf(r),i=u)):n.selectionStart!==undefined&&(f=n.selectionStart,e=n.selectionEnd,f!=e&&(t=f,i=e)),{start:t,end:i}}var t=n.telerik,f=[8,9,37,38,39,40,46,35,36,44],r=["font-family","font-size","font-stretch","font-style","font-weight","line-height","color","text-align","text-decoration","text-transform"],i;t.scripts.push("telerik.textbox.js"),t.textbox=function(i,r){var u,o,f,s,h;if(i.nodeName.toLowerCase()!=="input"&&i.type.toLowerCase()!=="text")throw"Target element is not a INPUT";u=this,n.extend(u,r),u.element=i,o=u.$element=n(i).bind({keydown:n.proxy(u._keydown,u),keypress:n.proxy(u._keypress,u)}).bind("paste",n.proxy(u._paste,u)),o.closest("form").bind("reset",n.proxy(u._onParentFormReset,u)),f=new t.stringBuilder,i.parentNode.nodeName.toLowerCase()!=="div"&&(o.addClass("t-input").wrap(n('<div class="t-widget t-numerictextbox"><\/div>')),u.showIncreaseButton&&f.cat('<a class="t-link t-icon t-arrow-up" href="#" tabindex="-1" title="').cat(u.increaseButtonTitle).cat('">Increment<\/a>'),u.showDecreaseButton&&f.cat('<a class="t-link t-icon t-arrow-down" href="#" tabindex="-1" title="').cat(u.decreaseButtonTitle).cat('">Decrement<\/a>'),f.buffer.length>0&&n(f.string()).insertAfter(o)),u.$wrapper=o.closest(".t-numerictextbox").find(".t-arrow-up, .t-arrow-down").bind({click:t.preventDefault,dragstart:t.preventDefault}).end().bind({focusin:n.proxy(u._focus,u),focusout:n.proxy(u._blur,u)}),u.enabled=!o.is("[disabled]"),f.buffer=[],f.cat("[ |").cat(u.groupSeparator).catIf("|"+u.symbol,u.symbol).cat("]"),u.replaceRegExp=new RegExp(f.string(),"g"),s=o.attr("value"),h=o.attr("class").replace("t-input","").replace("input-validation-error",""),f.buffer=[],f.cat('<div class="t-formatted-value').catIf(" t-state-empty",s==""&&u.enabled).catIf(h,h).cat('">').cat(s||(u.enabled?u.text:"")).cat("<\/div>"),u.$text=n(f.string()).insertBefore(o).css(e(o)).click(function(){u.enabled&&i.focus()}),u._blur(),u[u.enabled?"enable":"disable"](),u.numFormat=u.numFormat===undefined?u.type.charAt(0):u.numFormat,u.step=u.parse(u.step),u.val=u.parse(u.val),u.minValue=u.parse(u.minValue),u.maxValue=u.parse(u.maxValue),u.decimals={"190":".","188":","},u.specialDecimals={"110":u.separator},u.value(s||u.val),t.bind(u,{load:u.onLoad,valueChange:u.onChange})},t.textbox.prototype={_paste:function(t){setTimeout(n.proxy(function(){var i=t.target.value,n;if(i=="-")return!0;n=this.parse(i),(n||n==0)&&this._update(n)},this))},_keydown:function(i){var l,a,v,y,p,w,g;setTimeout(n.proxy(function(){f.toggleClass("t-state-error",!this.inRange(this.parse(f.val()),this.minValue,this.maxValue))},this));var r=i.keyCode,f=this.$element,o=f[0],e=f.val(),b=this.separator,k=u(o),s=k.start,d=k.end,c=e?e.indexOf(b):-1,h=c===-1;if(h||s===-1||c>=s&&c<d&&(h=!0),l=this.specialDecimals[r],l)return h&&(s!=-1?(a=s,v=d):(y=t.caretPos(o),a=y,v=y),f.val(e.slice(0,a)+l+e.slice(v,e.length)),n.browser.msie&&o.createTextRange&&(p=o.createTextRange(),p.moveStart("textedit",1),p.select())),!1;if(w=this.decimals[r],w){if(w===b&&this.digits>0&&h)return!0;i.preventDefault()}if(r==8||r==46||r==13)return setTimeout(n.proxy(function(){this._update(this.parse(f.val()))},this)),!0;if(r==38||r==40)return g=r==38?1:-1,this._modify(g*this.step),!0;r==222&&i.preventDefault()},_keypress:function(i){var e=i.target,r=i.keyCode||i.which,o;if(r==0||n.inArray(r,f)!=-1||i.ctrlKey||i.shiftKey&&r==45||(this.minValue!==null&&this.minValue<0&&(u(e).start===0||t.caretPos(e)===0&&e.value.indexOf("-")===-1)&&(o=!0),o&&String.fromCharCode(r)=="-"||this.inRange(r,48,57)))return!0;i.preventDefault()},_focus:function(){if(this.enabled){this._showTextBoxValue(),this.$text.hide();var t=this.$element[0];this._focusing=setTimeout(function(){t.focus(),n.browser.msie?t.select():(t.selectionStart=0,t.selectionEnd=t.value.length)},0)}},_blur:function(){clearTimeout(this._focusing),this.$element.removeClass("t-state-error"),this.enabled&&(this.$text.show(),this._hideTextBoxValue());var t=this.minValue,i=this.maxValue,n=this.parse(this.$element.val());n!=null&&(t!=null&&n<t?n=t:i!=null&&n>i&&(n=i),n=parseFloat(n.toFixed(this.digits))),this._update(n)},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer),clearInterval(this.acceleration)},_stepper:function(t,i){if(t.which==1){var r=this.step;this._modify(i*r),this.timeout=setTimeout(n.proxy(function(){this.timer=setInterval(n.proxy(function(){this._modify(i*r)},this),80),this.acceleration=setInterval(function(){r+=1},1e3)},this),200)}},_modify:function(n){var t=this.parse(this.element.value),i=this.minValue,r=this.maxValue;t=t?t+n:n,i!==null&&t<i?t=i:r!==null&&t>r&&(t=r),this._update(parseFloat(t.toFixed(this.digits)))},_update:function(n){var i=this.val;this._value(n),i!=n&&t.trigger(this.element,"valueChange",{oldValue:i,newValue:n})&&this._value(i)},_value:function(n){var t=typeof n=="number"?n:this.parse(n),r=this.enabled?this.text:"",i=t===null;t!=null&&(t=parseFloat(t.toFixed(this.digits))),this.val=t,this.$element.val(i?"":this.formatEdit(t)),this.$text.html(i?r:this.format(t)),this.$text.toggleClass("t-state-empty",i)},_hideTextBoxValue:function(){var t=this.$element;this.enabled?(setTimeout(function(){t.css("color",t.css("background-color"))}),n.browser.opera&&t.css({color:t.css("background-color"),"text-indent":"-4444px"})):n.browser.msie?t.css({color:t.css("background-color"),"letter-spacing":"1000px"}):t.css({color:t.css("background-color"),"text-indent":"-4444px"})},_showTextBoxValue:function(){var t=this.$element,i=this.$text;this.enabled?setTimeout(function(){t.css({color:i.css("color"),"text-indent":"","letter-spacing":""})}):n.browser.msie?t.css({color:i.css("background-color"),"letter-spacing":"0px"}):t.css({color:i.css("background-color"),"text-indent":"0px"})},_onParentFormReset:function(){var n=this;window.setTimeout(function(){n._value(n.$element.val())},1)},enable:function(){var i=this.$wrapper.find(".t-arrow-up, .t-arrow-down"),r=n.proxy(this._clearTimer,this),t;this.enabled=!0,this.$element.removeAttr("disabled"),this.val||this.val==0?this._hideTextBoxValue():this.$text.addClass("t-state-empty").html(this.text),this.$wrapper.removeClass("t-state-disabled"),i.unbind("mouseup").unbind("mouseout").unbind("dblclick").bind({mouseup:r,mouseout:r,dblclick:r}),t="mousedown",i.eq(0).unbind(t).bind(t,n.proxy(function(n){this._stepper(n,1)},this)),i.eq(1).unbind(t).bind(t,n.proxy(function(n){this._stepper(n,-1)},this))},disable:function(){this.enabled=!1,this.$wrapper.addClass("t-state-disabled").find(".t-icon").unbind("mousedown").bind("mousedown",t.preventDefault),this.$element.attr("disabled","disabled"),this.val||this.val==0?this._hideTextBoxValue():this.$text.html("")},value:function(n){if(n===undefined)return this.parse(this.element.value);var t=typeof n=="number"?n:this.parse(n);this.inRange(t,this.minValue,this.maxValue)||(t=null),this._value(t)},formatEdit:function(n){var t=this.separator;return n&&t!="."&&(n=n.toString().replace(".",t)),n},format:function(n){return t.formatNumber(n,this.numFormat,this.digits,this.separator,this.groupSeparator,this.groupSize,this.positive,this.negative,this.symbol,!0)},inRange:function(n,t,i){return n===null||(t!==null?n>=t:!0)&&(i!==null?n<=i:!0)},parse:function(n){var i=null,r=this.separator,f,u;if(n||n=="0"){if(typeof n=="number")return n;n=n.replace(this.replaceRegExp,""),r&&r!="."&&(n=n.replace(r,".")),f=t.patterns[this.type].negative[this.negative].replace(/(\(|\))/g,"\\$1").replace("*","").replace("n","([\\d|\\.]*)"),u=new RegExp(f),i=u.test(n)?-parseFloat(u.exec(n)[1]):parseFloat(n)}return isNaN(i)?null:i}},n.fn.tTextBox=function(i){var r="numeric",u;return i&&i.type&&(r=i.type),u=n.fn.tTextBox.defaults[r],u.digits=t.cultureInfo[r+"decimaldigits"],u.separator=t.cultureInfo[r+"decimalseparator"],u.groupSeparator=t.cultureInfo[r+"groupseparator"],u.groupSize=t.cultureInfo[r+"groupsize"],u.positive=t.cultureInfo[r+"positive"],u.negative=t.cultureInfo[r+"negative"],u.symbol=t.cultureInfo[r+"symbol"],i=n.extend({},u,i),i.type=r,this.each(function(){var r=n(this);i=n.meta?n.extend({},i,r.data()):i,r.data("tTextBox")||(r.data("tTextBox",new t.textbox(this,i)),t.trigger(this,"load"))})},i={val:null,text:"",step:1,inputAttributes:"",increaseButtonTitle:"Increase value",decreaseButtonTitle:"Decrease value",showIncreaseButton:!0,showDecreaseButton:!0},n.fn.tTextBox.defaults={numeric:n.extend(i,{minValue:-100,maxValue:100}),currency:n.extend(i,{minValue:0,maxValue:1e3}),percent:n.extend(i,{minValue:0,maxValue:100})}})(jQuery);