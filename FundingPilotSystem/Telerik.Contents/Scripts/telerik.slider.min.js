(function(n){function f(n){return function(t){return t+n}}function e(n){return function(t){return t-n}}function s(n){return function(){return n}}function o(n){return n.replace(t.cultureInfo.numericdecimalseparator,".")}function r(n){(n+"").replace(t.cultureInfo.numericdecimalseparator,"."),n=parseFloat(n,10);var i=Math.pow(10,a||0);return Math.round(n*i)/i}function v(i,r){var f=n(r),o=i.orientation=="horizontal"?" t-slider-horizontal":" t-slider-vertical",u,e;return i.tickPlacement=="bottomRight"?u=" t-slider-bottomright":i.tickPlacement=="topLeft"&&(u=" t-slider-topleft"),e=i.style?i.style:f.attr("style"),(new t.stringBuilder).cat("<div class='t-widget t-slider").cat(o).catIf(" ",f.attr("class"),f.attr("class")).cat("'").catIf(" style='",e,"'",e).cat(">").cat("<div class='t-slider-wrap").catIf(" t-slider-buttons",i.showButtons).catIf(u,u).cat("'><\/div><\/div>").string()}function h(n,i){var r,u=n.orientation=="horizontal";return r=i=="increase"?u?"t-arrow-next":"t-arrow-up":u?"t-arrow-prev":"t-arrow-down",(new t.stringBuilder).cat("<a ").cat("class='t-button ").cat("t-button-"+i).cat("'><span class='t-icon ").cat(r).cat("' title='").cat(n[i+"ButtonTitle"]).cat("'>").cat(n[i+"ButtonTitle"]).cat("<\/span><\/a>").string()}function c(n){return(new t.stringBuilder).cat("<ul class='t-reset t-slider-items'>").rep("<li class='t-tick'>&nbsp;<\/li>",Math.floor((n.distance/n.smallStep).toFixed(3),10)+1).cat("<\/ul>").string()}function y(n){var i=n.is("input")?1:2;return(new t.stringBuilder).cat("<div class='t-slider-track'>").cat("<div class='t-slider-selection'><!-- --><\/div>").cat("<a href='javascript:void(0)' class='t-draghandle' title='Drag'>Drag<\/a>").catIf("<a href='javascript:void(0)' class='t-draghandle t-draghandle1' title='Drag'>Drag<\/a>",i>1).cat("<\/div>").string()}function l(t,i){var r=n(t);r.val(i.val),r.wrap(v(i,t)).hide(),i.showButtons&&r.before(h(i,"increase")).before(h(i,"decrease")),r.before(y(r))}var t=n.telerik,u=t.isTouch?"touchstart":"mousedown",a=3;t.scripts.push("telerik.slider.js"),t.slider=function(i,u){var h,y,a,v;u=u||{},h=n(i),i.type="text",this.element=i,u.val=r(o(h.val())||r(u.val)),u.distance=u.maxValue-u.minValue,n.extend(this,u),u.position=this.orientation=="horizontal"?"left":"bottom",u.size=this.orientation=="horizontal"?"width":"height",u.outerSize=this.orientation=="horizontal"?"outerWidth":"outerHeight",u.orientation=this.orientation,l(i,u),this.wrapper=h.closest(".t-slider"),this.trackDiv=this.wrapper.find(".t-slider-track"),t.slider.setTrackDivWidth(this.wrapper,u),this.maxSelection=this.trackDiv[u.size](),y=this.maxSelection/((this.maxValue-this.minValue)/this.smallStep),a=t.slider.calculateItemsWidth(this.wrapper,u,Math.floor(this.distance/this.smallStep)),u.tickPlacement!="none"&&y>=2&&(this.trackDiv.before(c(u)),t.slider.setItemsWidth(this.wrapper,this.trackDiv,a,u),t.slider.setItemsTitle(this.wrapper,u),t.slider.setItemsLargeTick(this.wrapper,u)),t.slider.calculateSteps.call(this,a),v={element:i,dragHandle:this.wrapper.find(".t-draghandle"),orientation:u.orientation,size:u.size,outerSize:u.outerSize,position:u.position,owner:this},this._setValueInRange(u.val),this[u.enabled?"enable":"disable"](),new t.slider.Selection(v),this._drag=new t.slider.Drag(v),this.keyMap={37:e(u.smallStep),40:e(u.smallStep),39:f(u.smallStep),38:f(u.smallStep),35:s(u.maxValue),36:s(u.minValue),33:f(u.largeStep),34:e(u.largeStep)},t.bind(this,{slide:this.onSlide,change:this.onChange,load:this.onLoad})},n.extend(t.slider,{setTrackDivWidth:function(n,t){var i=n.find(".t-slider-track"),u=r(i.css(t.position))*2;i[t.size](n[t.size]()-2-u)},setItemsWidth:function(t,i,r,u){var s=Math.floor(u.distance/u.smallStep),e=t.find(".t-tick"),h=0,c=i[u.size](),o=n.extend([],r),f;if(u.orientation=="horizontal")for(f=0;f<e.length-2;f++)n(e[f+1])[u.size](o[f]);else for(o=o.reverse(),f=2;f<e.length;f++)n(e[f-1])[u.size](o[f]);if(u.orientation=="horizontal"?(n(e[0]).addClass("t-first")[u.size](o[s]),n(e[e.length-1]).addClass("t-last")[u.size](o[s-1])):(n(e[e.length-1]).addClass("t-first")[u.size](o[0]),n(e[0]).addClass("t-last")[u.size](o[1])),u.distance%u.smallStep!=0&&u.orientation=="vertical"){for(f=0;f<o.length;f++)h+=r[f];t.find(".t-slider-items").css("padding-top",29+(c-h))}},setItemsTitle:function(i,u){var e=i.find(".t-tick"),o=u.minValue,f;if(u.orientation=="horizontal")for(f=0;f<e.length;f++)n(e[f]).attr("title",t.formatString(u.tooltip.format||"{0}",r(o))),o+=u.smallStep;else for(f=e.length-1;f>=0;f--)n(e[f]).attr("title",t.formatString(u.tooltip.format||"{0}",r(o))),o+=u.smallStep},setItemsLargeTick:function(t,i){var u;if(1e3*i.largeStep%(1e3*i.smallStep)==0){var e=t.find(".t-tick"),f={},o=r(i.largeStep/i.smallStep);if(i.orientation=="horizontal")for(u=0;u<e.length;u=r(u+o))f=n(e[u]),f.addClass("t-tick-large").html(n("<span class='t-label'><\/span>").html(f.attr("title")));else for(u=e.length-1;u>=0;u=r(u-o))f=n(e[u]),f.addClass("t-tick-large").html(n("<span class='t-label'><\/span>").html(f.attr("title"))),u!=0&&u!=e.length-1&&f.css("line-height",f[i.size]()+"px")}},calculateItemsWidth:function(n,t,i){var f=parseFloat(n.find(".t-slider-track").css(t.size))+1,o=f/t.distance,e,r,u;for(t.distance/t.smallStep-Math.floor(t.distance/t.smallStep)>0&&(f-=t.distance%t.smallStep*o),e=f/i,r=[],u=0;u<i-1;u++)r[u]=e;return r[i-1]=r[i]=e/2,this.roundWidths(r)},roundWidths:function(n){var t=0;for(i=0;i<n.length;i++)t+=n[i]-Math.floor(n[i]),n[i]=Math.floor(n[i]);return t=Math.round(t),this.addAdditionalSize(t,n)},addAdditionalSize:function(n,t){var r,i;if(n==0)return t;for(r=parseFloat(t.length-1)/parseFloat(n==1?n:n-1),i=0;i<n;i++)t[parseInt(Math.round(r*i))]+=1;return t},getValueFromPosition:function(n,t,i){var e=Math.max(i.smallStep*(i.maxSelection/i.distance),0),f=0,o=e/2,u;if(f=i.orientation=="horizontal"?n-t.startPoint:t.startPoint-n,i.maxSelection-(parseInt(i.maxSelection%e)-3)/2<f)return i.maxValue;for(u=0;u<i._pixelStepsArray.length;u++)if(Math.abs(i._pixelStepsArray[u]-f)-1<=o)return r(i._valuesArray[u])},getDragableArea:function(n,t,i){var r=n.offset().left,u=n.offset().top;return{startPoint:i=="horizontal"?r:u+t,endPoint:i=="horizontal"?r+t:u}},calculateSteps:function(n){var t=this,e=t.minValue,u=0,r=n.length,f;if(i=1,n.splice(0,0,n.pop()*2),n.splice(r,1,n.pop()*2),t._pixelStepsArray=[u],t._valuesArray=[e],r!=0){while(i<r)u+=(n[i-1]+n[i])/2,t._pixelStepsArray[i]=u,t._valuesArray[i]=e+=t.smallStep,i++;f=t.maxValue%t.smallStep==0?r-1:r,t._pixelStepsArray[f]=t.maxSelection,t._valuesArray[f]=t.maxValue}}}),t.slider.prototype={enable:function(){var t,i,r;this.wrapper.removeAttr("disabled").removeClass("t-state-disabled").addClass("t-state-default"),t=n.proxy(function(t){n(t.target).hasClass("t-draghandle")||this._drag.start(t)},this),this.wrapper.find(".t-tick").bind(u,t).end().find(".t-slider-track").bind(u,t),i=n.proxy(function(n,t){var i=Math.ceil(this.val/this.smallStep);i>=this._valuesArray.length-1||i<=0?this._setValueInRange(this.val+t*this.smallStep):this._setValueInRange(this._valuesArray[i+t*1])},this),this.showButtons&&(r=n.proxy(function(t,r){t.which==1&&(i(t,r),this.timeout=setTimeout(n.proxy(function(){this.timer=setInterval(function(){i(t,r)},60)},this),200))},this),this.wrapper.find(".t-button").unbind("mousedown").unbind("mouseup").bind("mouseup",n.proxy(function(){this._clearTimer()},this)).unbind("mouseover").bind("mouseover",function(t){n(t.currentTarget).addClass("t-state-hover")}).unbind("mouseout").bind("mouseout",n.proxy(function(t){n(t.currentTarget).removeClass("t-state-hover"),this._clearTimer()},this)).eq(0).bind("mousedown",n.proxy(function(n){r(n,1),n.preventDefault()},this)).end().eq(1).bind("mousedown",n.proxy(function(n){r(n,-1),n.preventDefault()},this))),this.wrapper.find(".t-draghandle").bind({keydown:n.proxy(this._keydown,this)}),this.enabled=!0},disable:function(){this.wrapper.attr("disabled","disabled").removeClass("t-state-default").addClass("t-state-disabled");var n=t.preventDefault;this.wrapper.find(".t-button").unbind("mousedown").bind("mousedown",n).unbind("mouseup").bind("mouseup",n).unbind("mouseleave").bind("mouseleave",n).unbind("mouseover").bind("mouseover",n),this.wrapper.find(".t-tick").unbind(u).end().find(".t-slider-track").unbind(u),this.wrapper.find(".t-draghandle").unbind("keydown").bind("keydown",n),this.enabled=!1},_update:function(n){var i=this.value()!=n;this.value(n),i&&t.trigger(this.element,"change",{value:this.val})},value:function(i){if(i=r(i),isNaN(i))return this.val;i>=this.minValue&&i<=this.maxValue&&this.val!=i&&(n(this.element).attr("value",r(o(t.formatString("{0:N}",i)))),this.val=i,this.refresh())},refresh:function(){t.trigger(this.element,"t:moveSelection",{value:this.val})},_clearTimer:function(){clearTimeout(this.timeout),clearInterval(this.timer)},_keydown:function(n){n.keyCode in this.keyMap&&(this._setValueInRange(this.keyMap[n.keyCode](this.val)),n.preventDefault())},_setValueInRange:function(n){if(n=r(n),isNaN(n)){this._update(this.minValue);return}n=Math.max(n,this.minValue),n=Math.min(n,this.maxValue),this._update(n)}},t.slider.Selection=function(t){function f(n){var u=n-i.minValue,f=Math.ceil(u/i.smallStep),r=i._pixelStepsArray[f],e=i.trackDiv.find(".t-slider-selection"),o=parseInt(t.dragHandle[t.outerSize]()/2,10)+1;e[t.size](r),t.dragHandle.css(t.position,r-o)}var e=n(t.element),i=t.owner,u;f(i.val),u=function(n){f(r(n.value))},e.bind({change:u,slide:u,"t:moveSelection":u})},t.slider.Drag=function(i){i.dragHandleSize=i.dragHandle[i.outerSize](),n.extend(this,i);var r="";switch(i.type){case"firstHandle":r=".t-draghandle:first";break;case"lastHandle":r=".t-draghandle:last";break;default:r=".t-draghandle"}this.draggable=new t.draggable({distance:0,owner:i.owner.wrapper[0],selector:r,scope:i.element.id,start:n.proxy(this._start,this),drag:n.proxy(this.drag,this),stop:n.proxy(this.stop,this)})},t.slider.Drag.prototype={start:function(n){var i=t.touchLocation(n);this.draggable._startDrag(n.currentTarget,i),this.draggable._start(n),this.draggable._drag(n)},_start:function(){var u,f,i;if(!this.owner.enabled)return!1;n(this.element).unbind("mouseover"),this.val=r(n(this.element).val()),this.dragableArea=t.slider.getDragableArea(this.owner.trackDiv,this.owner.maxSelection,this.orientation),this.step=Math.max(this.owner.smallStep*(this.owner.maxSelection/this.owner.distance),0),this.selectionStart=this.owner.selectionStart,this.selectionEnd=this.owner.selectionEnd,this.oldVal=this.val,this.format=this.owner.tooltip.format||"{0}",this.type&&this.owner._setZIndex(this.type),this.owner.tooltip.enabled&&(this.tooltipDiv=n("<div class='t-widget t-tooltip'><!-- --><\/div>").appendTo(document.body),this.type?(u=t.formatString(this.format,this.selectionStart),f=t.formatString(this.format,this.selectionEnd),this.tooltipDiv.html(u+" - "+f)):(i="t-callout-",i+=this.orientation=="horizontal"?this.owner.tickPlacement=="topLeft"?"n":"s":this.owner.tickPlacement=="topLeft"?"w":"e",this.tooltipInnerDiv="<div class='t-callout "+i+"'><!-- --><\/div>",this.tooltipDiv.html(t.formatString(this.owner.tooltip.format||"{0}",this.val)+this.tooltipInnerDiv)),this.moveTooltip())},drag:function(n){var i=t.touchLocation(n),r,u;this.val=this.orientation=="horizontal"?this.horizontalDrag(i.x):this.verticalDrag(i.y),this.oldVal!=this.val&&(this.oldVal=this.val,this.type?(this.type=="firstHandle"?this.selectionStart=this.val<this.selectionEnd?this.val:this.selectionEnd=this.val:this.val>this.selectionStart?this.selectionEnd=this.val:this.selectionStart=this.selectionEnd=this.val,t.trigger(this.element,"slide",{values:[this.selectionStart,this.selectionEnd]}),this.owner.tooltip.enabled&&(r=t.formatString(this.format,this.selectionStart),u=t.formatString(this.format,this.selectionEnd),this.tooltipDiv.html(r+" - "+u))):(t.trigger(this.element,"slide",{value:this.val}),this.owner.tooltip.enabled&&this.tooltipDiv.html(t.formatString(this.format,this.val)+this.tooltipInnerDiv)),this.owner.tooltip.enabled&&this.moveTooltip())},stop:function(i){return t.isTouch&&i.preventDefault(),i.keyCode==27?this.owner.refresh():this.type?this.owner._update(this.selectionStart,this.selectionEnd):this.owner._update(this.val),this.owner.tooltip.enabled&&this.tooltipDiv.remove(),n(this.element).bind("mouseover"),!1},moveTooltip:function(){var n=this,t=0,i=0,e=4,o=n.tooltipDiv.find(".t-callout"),f;if(n.type){var s=n.owner.wrapper.find(".t-draghandle"),r=s.eq(0).offset(),u=s.eq(1).offset();n.orientation=="horizontal"?(t=u.top,i=r.left+(u.left-r.left)/2):(t=r.top+(u.top-r.top)/2,i=u.left)}else f=n.dragHandle.offset(),t=f.top,i=f.left;n.orientation=="horizontal"?(i-=Math.round((n.tooltipDiv.outerWidth()-n.dragHandle[n.outerSize]())/2),t-=n.tooltipDiv.outerHeight()+o.height()+e):(t-=Math.round((n.tooltipDiv.outerHeight()-n.dragHandle[n.outerSize]())/2),i-=n.tooltipDiv.outerWidth()+o.width()+e),n.tooltipDiv.css({top:t,left:i})},horizontalDrag:function(n){return this.dragableArea.startPoint<n&&n<this.dragableArea.endPoint?t.slider.getValueFromPosition(n,this.dragableArea,this.owner):n>=this.dragableArea.endPoint?this.owner.maxValue:this.owner.minValue},verticalDrag:function(n){return this.dragableArea.startPoint>n&&n>this.dragableArea.endPoint?t.slider.getValueFromPosition(n,this.dragableArea,this.owner):n<=this.dragableArea.endPoint?this.owner.maxValue:this.owner.minValue}},n.fn.tSlider=function(n){return t.create(this,{name:"tSlider",init:function(n,i){return new t.slider(n,i)},options:n})},n.fn.tSlider.defaults={enabled:!0,minValue:0,maxValue:10,smallStep:1,largeStep:5,showButtons:!0,increaseButtonTitle:"Increase",decreaseButtonTitle:"Decrease",orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}},t.rangeSlider=function(i,u){var w=n(i),h=n(i).find("input"),y,a,v,p;u=u||{},h[0].type="text",h[1].type="text",u.selectionStart=r(o(h.eq(0).val())||u.selectionStart),u.selectionEnd=r(o(h.eq(1).val())||u.selectionEnd),this.values(u.selectionStart,u.selectionEnd),this.element=i,u.distance=u.maxValue-u.minValue,n.extend(this,u),u.position=this.orientation=="horizontal"?"left":"bottom",u.size=this.orientation=="horizontal"?"width":"height",u.outerSize=this.orientation=="horizontal"?"outerWidth":"outerHeight",l(i,u),this.wrapper=w.closest(".t-slider"),this.trackDiv=this.wrapper.find(".t-slider-track"),t.slider.setTrackDivWidth(this.wrapper,u),this.maxSelection=this.trackDiv[u.size](),y=this.maxSelection/((this.maxValue-this.minValue)/this.smallStep),a=t.slider.calculateItemsWidth(this.wrapper,u,Math.floor(this.distance/this.smallStep)),u.tickPlacement!="none"&&y>=2&&(this.trackDiv.before(c(u)),t.slider.setItemsWidth(this.wrapper,this.trackDiv,a,u),t.slider.setItemsTitle(this.wrapper,u),t.slider.setItemsLargeTick(this.wrapper,u)),t.slider.calculateSteps.call(this,a),this._correctValues(this.selectionStart,this.selectionEnd),v={element:i,type:"firstHandle",dragHandle:this.wrapper.find(".t-draghandle:first"),orientation:u.orientation,size:u.size,outerSize:u.outerSize,position:u.position,owner:this},this._firstHandleDrag=new t.slider.Drag(v),new t.rangeSlider.Selection(v),p={element:i,type:"lastHandle",outerSize:u.outerSize,dragHandle:this.wrapper.find(".t-draghandle:last"),orientation:u.orientation,size:u.size,position:u.position,owner:this},this._lastHandleDrag=new t.slider.Drag(p),this[u.enabled?"enable":"disable"](),this.keyMap={37:e(u.smallStep),40:e(u.smallStep),39:f(u.smallStep),38:f(u.smallStep),35:s(u.maxValue),36:s(u.minValue),33:f(u.largeStep),34:e(u.largeStep)},t.bind(this,{slide:this.onSlide,change:this.onChange,load:this.onLoad})},t.rangeSlider.prototype={enable:function(){this.wrapper.removeAttr("disabled").removeClass("t-state-disabled").addClass("t-state-default");var i=n.proxy(function(i){if(!n(i.target).hasClass("t-draghandle")){var u=t.touchLocation(i),f=this.orientation=="horizontal"?u.x:u.y,e=t.slider.getDragableArea(this.trackDiv,this.maxSelection,this.orientation),r=t.slider.getValueFromPosition(f,e,this);r<this.selectionStart?this._firstHandleDrag.start(i):r>this.selectionEnd?this._lastHandleDrag.start(i):r-this.selectionStart<=this.selectionEnd-r?this._firstHandleDrag.start(i):this._lastHandleDrag.start(i)}},this);this.wrapper.find(".t-tick").bind(u,i).end().find(".t-slider-track").bind(u,i),this.wrapper.find(".t-draghandle").eq(0).bind({keydown:n.proxy(function(n){this._keydown(n,!0)},this)}).end().eq(1).bind({keydown:n.proxy(function(n){this._keydown(n,!1)},this)}),this.enabled=!0},disable:function(){this.wrapper.attr("disabled","disabled").removeClass("t-state-default").addClass("t-state-disabled"),this.wrapper.find(".t-tick").unbind(u).end().find(".t-slider-track").unbind(u),this.wrapper.find(".t-draghandle").unbind("keydown").bind("keydown",t.preventDefault),this.enabled=!1},_keydown:function(n,t){var i=this.selectionStart,r=this.selectionEnd;n.keyCode in this.keyMap&&(t?(i=this.keyMap[n.keyCode](i),i>r&&(r=i)):(r=this.keyMap[n.keyCode](r),r<i&&(i=r)),this._setValueInRange(i,r),n.preventDefault())},_update:function(n,i){var r=this.values(),u=r[0]!=n||r[1]!=i;this.values(n,i),u&&t.trigger(this.element,"change",{values:[n,i]})},values:function(i,u){var f=[this.selectionStart,this.selectionEnd];if((i=r(i),isNaN(i))||(u=r(u),isNaN(u)))return f;i>=this.minValue&&i<=this.maxValue&&u>=this.minValue&&u<=this.maxValue&&i<=u&&(this.selectionStart!=i||this.selectionEnd!=u)&&(n(this.element).find("input").eq(0).attr("value",r(o(t.formatString("{0:N}",i)))).end().eq(1).attr("value",r(o(t.formatString("{0:N}",u)))),this.selectionStart=i,this.selectionEnd=u,this.refresh())},refresh:function(){t.trigger(this.element,"t:moveSelection",{values:[this.selectionStart,this.selectionEnd]}),this.selectionStart==this.maxValue&&this.selectionEnd==this.maxValue&&this._setZIndex("firstHandle")},_setValueInRange:function(n,t){n=Math.max(n,this.minValue),n=Math.min(n,this.maxValue),t=Math.max(t,this.minValue),t=Math.min(t,this.maxValue),this.selectionStart==this.maxValue&&this.selectionEnd==this.maxValue&&this._setZIndex("firstHandle"),this._update(n,t)},_correctValues:function(n,t){n>=t?this._setValueInRange(t,n):this._setValueInRange(n,t)},_setZIndex:function(n){var i=this.wrapper.find(".t-draghandle"),r=i.eq(0),u=i.eq(1),t="z-index";n=="firstHandle"?(r.css(t,"1"),u.css(t,"")):(r.css(t,""),u.css(t,"1"))}},t.rangeSlider.Selection=function(t){function u(n){var s=n[0]-i.minValue,h=n[1]-i.minValue,c=Math.ceil(s/i.smallStep),l=Math.ceil(h/i.smallStep),r=i._pixelStepsArray[c],u=i._pixelStepsArray[l],e=i.wrapper.find(".t-draghandle"),o=parseInt(e.eq(0)[t.outerSize]()/2,10)+1;e.eq(0).css(t.position,r-o).end().eq(1).css(t.position,u-o),f(r,u)}function f(n,r){var u=0,f=0,e=i.trackDiv.find(".t-slider-selection");u=Math.abs(n-r),f=n<r?n:r,e[t.size](u),e.css(t.position,f-1)}var i=t.owner,r;u(i.values()),r=function(n){u(n.values)},n(i.element).bind({change:r,slide:r,"t:moveSelection":r})},n.fn.tRangeSlider=function(n){return t.create(this,{name:"tRangeSlider",init:function(n,i){return new t.rangeSlider(n,i)},options:n})},n.fn.tRangeSlider.defaults={enabled:!0,minValue:0,maxValue:10,smallStep:1,largeStep:5,selectionStart:0,selectionEnd:10,orientation:"horizontal",tickPlacement:"both",tooltip:{enabled:!0,format:"{0}"}}})(jQuery);